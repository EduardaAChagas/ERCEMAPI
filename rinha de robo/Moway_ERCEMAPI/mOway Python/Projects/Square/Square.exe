import sys, atexit, msvcrt
from time import sleep
sys.path.append("../lib/")
from moway_lib import *

if __name__ == '__main__':
        atexit.register(exit_mow)
        
channel = 7
moway.usbinit_moway()
ret = moway.init_moway(channel)
if ret == 0:
        print 'Moway RFUSB Connected'
else:   
        print 'Moway RFUSB not connected. Exit'
        exit(-1)
#__________________________________________________________
#moway.set_rotation_axis(WHEEL)
#while True:
        #line_r = moway.get_line_right()
        #line_f = moway.get_line_left()
        #fel = line_r - line_f
        #mik = line_r + line_f

        #print(line_f,line_r)
        #print("fel, mik")
        #print(fel, mik)
        #ffffffif fel > -10 and fel < 10:
        #if mik >= 180:
                #moway.set_time(20)
                #moway.set_distance(10)
                #moway.command_moway(CMD_GO,50)
        #else:
                #if line_r > line_f:
                        #moway.command_moway(CMD_ROTATERIGHT,30)
                        #moway.command_moway(CMD_STOP,25)
                #elif line_f > line_r:
                        #moway.command_moway(CMD_ROTATELEFT,30)
                        #moway.command_moway(CMD_STOP,25)
#________________________________________________________________
        while True:
                if msvcrt.kbhit():
                        ch=msvcrt.getch()
                        if ch=='w':
                                moway.command_moway(CMD_GO_SIMPLE,0)
                        if ch=='z':
                                moway.command_moway(CMD_BACK_SIMPLE,0)
                        if ch=='a':
                                moway.command_moway(CMD_LEFT_SIMPLE,0)
                        if ch=='d':
                                moway.command_moway(CMD_RIGHT_SIMPLE,0)
                        if ch=='s':
                                moway.command_moway(CMD_STOP,0)
       
                                
                                
                                
